<div class="no-scroll">
  <div class="reset-password-container">
    <div class="reset-password-form">
      @if (!isSuccess) {
        @if (tokenValid) {
          <h2>RÃ©initialiser votre mot de passe</h2>
          <form (ngSubmit)="onSubmit()">
            <div class="form-group">
              <p>Nouveau mot de passe:</p>
              <div class="password-field">
                <input
                  [type]="showNewPassword ? 'text' : 'password'"
                  id="newPassword"
                  name="newPassword"
                  [(ngModel)]="newPassword"
                  required
                  placeholder="Entrez votre nouveau mot de passe"
                >
                <button type="button" class="toggle-btn" (click)="toggleNewPasswordVisibility()" aria-label="Afficher ou masquer le mot de passe">
                  {{ showNewPassword ? 'ğŸ‘' : 'ğŸ‘â€ğŸ—¨' }}
                </button>
              </div>
              <small class="password-hint">
                Au moins 10 caractÃ¨res, avec majuscule, minuscule, chiffre et caractÃ¨re spÃ©cial
              </small>
            </div>
            <div class="form-group">
              <p>Confirmer le mot de passe:</p>
              <div class="password-field">
                <input
                  [type]="showConfirmPassword ? 'text' : 'password'"
                  id="confirmPassword"
                  name="confirmPassword"
                  [(ngModel)]="confirmPassword"
                  required
                  placeholder="Confirmer votre mot de passe"
                >
                <button type="button" class="toggle-btn" (click)="toggleConfirmPasswordVisibility()" aria-label="Afficher ou masquer la confirmation">
                  {{ showConfirmPassword ? 'ğŸ‘' : 'ğŸ‘â€ğŸ—¨' }}
                </button>
              </div>
            </div>
            @if (errorMessage) {
              <p class="error-message">{{ errorMessage }}</p>
            }
            <button type="submit" [disabled]="isLoading">
              {{ isLoading ? 'Traitement en cours...' : 'RÃ©initialiser le mot de passe' }}
            </button>
          </form>
        } @else {
          <div class="error-box">
            <h2>Lien invalide</h2>
            <p>{{ errorMessage }}</p>
            <button (click)="backToLogin()">Retour Ã  la connexion</button>
          </div>
        }
      } @else {
        <div class="success-message">
          <h2>Mot de passe rÃ©initialisÃ©</h2>
          <p>
            Votre mot de passe a Ã©tÃ© rÃ©initialisÃ© avec succÃ¨s. Vous pouvez maintenant vous connecter avec votre nouveau mot de passe.
          </p>
          <button (click)="backToLogin()">Aller Ã  la connexion</button>
        </div>
      }
    </div>
  </div>
</div>
