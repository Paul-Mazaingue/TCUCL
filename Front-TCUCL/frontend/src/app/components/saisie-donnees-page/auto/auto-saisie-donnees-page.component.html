<div class="main-container">
  <div class="panels-wrapper">
  <div class="left-panel">
    <div class="page-title">
      <h2>Poste automobile</h2>
      <span
        class="help-icon"
        title="Merci de renseigner uniquement les v√©hciules appartenant √† votre entit√©"
      >
        <svg
          width="1em"
          height="1em"
          viewBox="0 0 24 24"
          fill="currentColor"
          aria-hidden="true"
        >
          <circle
            cx="12"
            cy="12"
            r="10"
            stroke="currentColor"
            stroke-width="2"
            fill="black"
          ></circle>
          <rect x="11" y="10" width="2" height="6" fill="white"></rect>
          <circle cx="12" cy="8" r="1" fill="white"></circle>
        </svg>
      </span>
    </div>
    <details>
      <summary><strong>Saisir une nouvelle voiture</strong></summary>

      <div class="form-column">
        <label>Mod√®le / Immatriculation</label>
        <input
          type="text"
          [(ngModel)]="nouveauVehicule.modeleOuImmatriculation"
        />

        <label>Type de v√©hicule</label>
        <select [(ngModel)]="nouveauVehicule.typeVehicule">
          <option
            *ngFor="let type of vehiculeTypesLibelles"
            [ngValue]="type.value"
          >
            {{ type.label }}
          </option>
        </select>

        <label>Nombre de v√©hicules identiques</label>
        <input
          type="number"
          [(ngModel)]="nouveauVehicule.nombreVehiculesIdentiques"
        />

        <label>Nombre de Km moyen annuel / Voiture</label>
        <input
          type="number"
          [(ngModel)]="nouveauVehicule.nombreKilometresParVoitureMoyen"
        />
      </div>

      <button type="button" (click)="ajouterVehicule()">
        Ajouter ce v√©hicule
      </button>
    </details>

    <div *ngIf="vehiculeOnglet.vehicules.length > 0">
      <h3>Voitures ajout√©es</h3>
      <table class="data-table">
        <thead>
          <tr>
            <th>Mod√®le / Immatriculation</th>
            <th>Type</th>
            <th>Nb de v√©hicules identiques</th>
            <th>Nb de Km moyen annuel par voiture</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let v of vehiculeOnglet.vehicules; let i = index">
            <td>{{ v.modeleOuImmatriculation }}</td>
            <td>{{ getLibelleTypeVehicule(v.typeVehicule) }}</td>
            <td>{{ v.nombreVehiculesIdentiques }}</td>
            <td>{{ v.nombreKilometresParVoitureMoyen }}</td>
            <td>
              <button type="button" (click)="supprimerVehicule(i)">üóëÔ∏è</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="right-panel">
    <h2>R√©sultats des √©missions GES</h2>
    <table class="data-table">
      <tbody>
        <tr>
          <td>√âmission fabrication</td>
          <td>{{ (vehiculeResultat?.totalEmissionGESFabrication || 0) | number:'1.2-2' }} tCO‚ÇÇe</td>
        </tr>
        <tr>
          <td>√âmission p√©trole</td>
          <td>{{ (vehiculeResultat?.totalEmissionGESPetrole || 0) | number:'1.2-2' }} tCO‚ÇÇe</td>
        </tr>
        <tr>
          <td>√âmission √©lectrique</td>
          <td>{{ (vehiculeResultat?.totalEmissionGESElectrique || 0) | number:'1.2-2' }} tCO‚ÇÇe</td>
        </tr>
        <tr>
          <td><strong>√âmission totale</strong></td>
          <td><strong>{{ (vehiculeResultat?.totalEmissionGES || 0) | number:'1.2-2' }} tCO‚ÇÇe</strong></td>
        </tr>
      </tbody>
    </table>
  </div>
  </div>
  <app-save-footer
    [path]="ONGLET_KEYS.Auto"
    (estTermineChange)="onEstTermineChange($event)"
  ></app-save-footer>
</div>
