<div class="page">
 
  <section class="top-actions">
    <div class="top-actions__group">
      <button class="btn" (click)="exportCSV()">ğŸ“„ CSV</button>
      <button class="btn btn-primary" (click)="exportPDF()">ğŸ“˜ PDF</button>
      <button class="btn btn-secondary" (click)="goHome()">â† Retour</button>
    </div>
  </section>
 
  <header class="hero">
    <div class="hero__left">
      <h1 class="hero__title">Trajectoire carbone pour lâ€™internationale</h1>
      <p class="hero__subtitle">Construction et suivi de la trajectoire de rÃ©duction des Ã©missions</p>
    </div>
 
    <div class="hero__right">
      <span class="badge badge--soft">Enjeu 1,5Â°C et 2Â°C</span>
      <span class="badge badge--primary">Objectif Net ZÃ©ro 2030</span>
    </div>
  </header>
 
  <section class="filters-and-badge">
    <div class="filters">
      <div class="filter-card">
        <label>AnnÃ©e de rÃ©fÃ©rence</label>
        <select class="select" [(ngModel)]="startYear" (ngModelChange)="onStartYearSelect($event)">
          <option *ngFor="let y of allowedYears" [ngValue]="y" [disabled]="y > endYear">{{ y }}</option>
        </select>
      </div>
 
      <div class="filter-card">
        <label>AnnÃ©e objectif</label>
        <select class="select" [(ngModel)]="endYear" (ngModelChange)="onEndYearSelect($event)">
          <option *ngFor="let y of allowedYears" [ngValue]="y" [disabled]="y < startYear">{{ y }}</option>
        </select>
      </div>
 
      <div class="filter-card filter-card--slider">
        <div class="filter-card__head">
          <label>Baisse globale souhaitÃ©e</label>
          <span class="percent-chip">{{ reduction }}%</span>
        </div>
        <input type="range" min="0" max="100" step="1" [(ngModel)]="reduction" (input)="onReductionInput($event)" />
      </div>
    </div>
 
    <aside class="wish-card">
      <div class="wish-card__title">
        Baisse globale attendue entre {{ startYear }} et {{ endYear }}
      </div>
      <div class="wish-card__value">
        {{ overallDropBetweenPct | number:'1.0-0' }}%
      </div>
      <div class="wish-card__hint">kgCOâ‚‚e/usagers</div>
    </aside>
  </section>
 
  <section class="panel">
    <h2 class="panel__title">Graphique de trajectoire</h2>
    <div class="chart-wrap">
      <canvas id="trajectory-chart"></canvas>
    </div>
  </section>
 
  <section class="panel">
    <h2 class="panel__title">Tableau des valeurs</h2>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th class="sticky">Poste</th>
            <th *ngFor="let y of years">{{ y }}</th>
            <th>Baisse entre {{ startYear }} et {{ endYear }}</th>
            <th>Baisse annuelle requise</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of tableRows">
            <td class="sticky">{{ row.label }}</td>
            <td *ngFor="let v of row.values" class="num">{{ v }}</td>
            <td class="num">{{ row.dropBetweenPct }}%</td>
            <td class="num">{{ row.annualRequiredPct }}%</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
 
</div>