<div class="dashboard-page" *ngIf="!isSuperAdmin()">
  <div class="dashboard dashboard-container">
    <h2>Saisie des données</h2>

    <div class="year-card">
      <div class="year-card__title">Année de saisie</div>
      <div class="year-card__hint">Choisissez l’année puis lancez la saisie.</div>
      <label class="year-card__label" for="yearSelect">Année</label>
      <select
        id="yearSelect"
        class="year-dropdown"
        [(ngModel)]="selectedYear"
        (ngModelChange)="onYearChange($event)">
        <option *ngFor="let year of years" [value]="year.value">
          {{ year.label }} {{ year.value === currentYear ? '(courante)' : '' }}
        </option>
      </select>
      <button class="main-button" (click)="goToGeneralOnglet()">
        Commencer la saisie
      </button>
    </div>

    <p class="subtitle">
      {{ dashboardSubtitle }}
    </p>

    <div class="status-grid">
      <div class="column">
        <div class="row" *ngFor="let onglet of onglets.slice(0, 6)">
          <span class="icon" [ngClass]="getStatus(onglet.statusKey) ? 'status-termine' : 'status-en-cours'">
            {{ getStatus(onglet.statusKey) ? '✅' : '⏳' }}
          </span>
          {{ onglet.label }}
          <span class="edit" (click)="goToSaisie(onglet)">✏️</span>
        </div>
      </div>
      <div class="column">
        <div class="row" *ngFor="let onglet of onglets.slice(6)">
          <span class="icon" [ngClass]="getStatus(onglet.statusKey) ? 'status-termine' : 'status-en-cours'">
            {{ getStatus(onglet.statusKey) ? '✅' : '⏳' }}
          </span>
          {{ onglet.label }}
          <span class="edit" (click)="goToSaisie(onglet)">✏️</span>
        </div>
      </div>
    </div>
  </div>
  <div class="dashboard dashboard-side">
    <app-bilan-par-secteur
      [sectors]="sectors"
      [total]="total"
      [establishmentName]="establishmentName"
      [yearRangeLabel]="selectedYearLabel"
      [referenceYear]="selectedYear"
    ></app-bilan-par-secteur>
  </div>
</div>
<div class="dashboard-page" *ngIf="isSuperAdmin()">
  <div class="dashboard dashboard-superadmin dashboard-side">
  </div>
</div>
